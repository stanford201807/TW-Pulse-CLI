# ç­–ç•¥ç³»çµ±æ¸¬è©¦çµæœç¸½çµ

**æ¸¬è©¦æ—¥æœŸ**: 2026-01-25  
**æ¸¬è©¦ç’°å¢ƒ**: Windows PowerShell + Python 3.14

---

## ğŸ“‹ æ¸¬è©¦æ¦‚æ³

æœ¬æ¬¡æ¸¬è©¦é©—è­‰äº† TW-Pulse-CLI ç­–ç•¥æ¨¡çµ„ç³»çµ±çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…å«ç­–ç•¥è¨»å†Šã€å‘½ä»¤è™•ç†ã€ä»¥åŠè¼¸å‡ºé¡¯ç¤ºæ©Ÿåˆ¶ã€‚

### æ¸¬è©¦ç¯„åœ

1. âœ… ç­–ç•¥è¨»å†Šæ©Ÿåˆ¶
2. âœ… ç­–ç•¥åˆ—è¡¨é¡¯ç¤ºï¼ˆ`/strategy` å‘½ä»¤ï¼‰
3. âœ… ç­–ç•¥è©³æƒ…æŸ¥è©¢ï¼ˆ`/strategy farmerplanting`ï¼‰
4. âœ… ç­–ç•¥éµå€¼è§£æ
5. âœ… å‘½ä»¤è™•ç†å™¨é‚è¼¯

---

## ğŸ§ª æ¸¬è©¦è…³æœ¬

### è…³æœ¬ 1: åŠŸèƒ½å®Œæ•´æ€§æ¸¬è©¦

**æª”æ¡ˆ**: `tests/test_cli/test_strategy_command.py`

**æ¸¬è©¦çµæœ**: âœ… **5/5 æ¸¬è©¦å…¨éƒ¨é€šé**

```
æ¸¬è©¦ 1: ç­–ç•¥è¨»å†Šæ©Ÿåˆ¶                 âœ… PASS
æ¸¬è©¦ 2: ç­–ç•¥é¸å–®é¡¯ç¤º                 âœ… PASS
æ¸¬è©¦ 3: ç­–ç•¥éµå€¼è§£æ                 âœ… PASS
æ¸¬è©¦ 4: ç­–ç•¥è©³ç´°è³‡è¨Š                 âœ… PASS
æ¸¬è©¦ 5: è¾²å¤«æ’­ç¨®è¡“ç­–ç•¥å°ˆé …æ¸¬è©¦       âœ… PASS
```

### è…³æœ¬ 2: è¨ºæ–·è¼¸å‡ºæ¸¬è©¦

**æª”æ¡ˆ**: `tests/test_cli/test_strategy_diagnostic.py`

**æ¸¬è©¦çµæœ**: âœ… **å‘½ä»¤åŸ·è¡Œæ­£å¸¸ï¼Œè¼¸å‡ºæ ¼å¼æ­£ç¢º**

æ¨¡æ“¬å‘½ä»¤åŸ·è¡ŒæˆåŠŸï¼š
- `/strategy` â†’ æ­£ç¢ºé¡¯ç¤ºç­–ç•¥é¸å–®
- `/strategy farmerplanting` â†’ æ­£ç¢ºé¡¯ç¤ºç­–ç•¥è©³æƒ…

---

## âœ… é©—è­‰çµæœ

### ç­–ç•¥è¨»å†Šç³»çµ±

- **å·²è¨»å†Šç­–ç•¥**: 1 å€‹
- **ç­–ç•¥åç¨±**: é€²éšè¾²å¤«æ’­ç¨®è¡“ (FarmerPlantingStrategy)
- **ç­–ç•¥éµå€¼**: `farmerplanting`
- **è¨»å†Šç‹€æ…‹**: âœ… æ­£å¸¸

### ç­–ç•¥é…ç½®åƒæ•¸

æ‰€æœ‰é…ç½®åƒæ•¸æ­£ç¢ºè¼‰å…¥ï¼š

| åƒæ•¸åç¨± | é è¨­å€¼ | èªªæ˜ |
|---------|--------|------|
| `max_positions` | 10 | æœ€å¤§æŒå€‰ä»½æ•¸ |
| `shares_per_position` | 1000 | æ¯ä»½è‚¡æ•¸ï¼ˆ1 å¼µ = 1000 è‚¡ï¼‰ |
| `add_threshold` | 1.03 | åŠ ç¢¼é–€æª»ï¼ˆæ¼²å¹… 3%ï¼‰ |
| `reduce_threshold` | 0.97 | æ¸›ç¢¼é–€æª»ï¼ˆè·Œå¹… 3%ï¼‰ |
| `trailing_stop` | 0.2 | ç§»å‹•åœåˆ©å›æ’¤æ¯”ä¾‹ï¼ˆ20%ï¼‰ |
| `ma200_stop` | 0.96 | MA200 é˜²ç¦¦å€æ•¸ï¼ˆè·Œç ´ 4%ï¼‰ |
| `rsi_oversold` | 30 | RSI è¶…è³£é–€æª» |

### å‘½ä»¤è™•ç†å™¨

âœ… `handle_strategy_command()` å‡½æ•¸æ­£å¸¸é‹ä½œ  
âœ… `show_strategy_menu()` è¼¸å‡ºæ ¼å¼æ­£ç¢º  
âœ… `show_strategy_details()` åƒæ•¸é¡¯ç¤ºå®Œæ•´  
âœ… éŒ¯èª¤è™•ç†æ©Ÿåˆ¶å¥å…¨

---

## ğŸ“ ä½¿ç”¨æŒ‡å—

### æ­£ç¢ºçš„å‘½ä»¤æ ¼å¼

åœ¨ pulse æ‡‰ç”¨ç¨‹å¼ä¸­ä½¿ç”¨ç­–ç•¥ç³»çµ±æ™‚ï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# é¡¯ç¤ºç­–ç•¥é¸å–®
/strategy

# é¡¯ç¤ºç­–ç•¥è©³æƒ…ï¼ˆä½¿ç”¨å®Œæ•´éµå€¼ï¼‰
/strategy farmerplanting

# æˆ–ä½¿ç”¨ç­–ç•¥ç·¨è™Ÿ
/strategy 1

# æŸ¥çœ‹ç‰¹å®šè‚¡ç¥¨çš„ç­–ç•¥ç‹€æ…‹
/strategy farmerplanting 2330

# åŸ·è¡Œå›æ¸¬
/strategy farmerplanting 2330 backtest
```

### å‘½ä»¤åˆ¥å

ä»¥ä¸‹åˆ¥åä¹Ÿå¯ä½¿ç”¨ï¼š
- `/strategies`
- `/ç­–ç•¥`

---

## ğŸ” å·²çŸ¥å•é¡Œèˆ‡èªªæ˜

### TUI è¼¸å‡ºå•é¡Œ

**ç¾è±¡**: åœ¨ pulse TUI æ‡‰ç”¨ç¨‹å¼ä¸­è¼¸å…¥ `/strategy` å¾Œï¼Œå¯èƒ½çœ‹ä¸åˆ°å³æ™‚è¼¸å‡ºã€‚

**åŸå› **: Textual TUI æ¡†æ¶çš„ console è¼¸å‡ºå¯èƒ½éœ€è¦ç‰¹æ®Šè™•ç†æ‰èƒ½æ­£ç¢ºé¡¯ç¤ºåœ¨ç•Œé¢ä¸­ã€‚

**é©—è­‰æ–¹æ³•**: ä½¿ç”¨æ¸¬è©¦è…³æœ¬å¯ä»¥ç¢ºèªå‘½ä»¤è™•ç†é‚è¼¯æœ¬èº«æ˜¯æ­£ç¢ºçš„ï¼š

```powershell
# åŸ·è¡Œè¨ºæ–·æ¸¬è©¦
.venv\Scripts\python tests\test_cli\test_strategy_diagnostic.py
```

**è§£æ±ºæ–¹æ¡ˆ**: 
1. æª¢æŸ¥ `PulseApp` çš„ `console` å±¬æ€§é…ç½®
2. ç¢ºèª Textual çš„æ¶ˆæ¯è™•ç†æ©Ÿåˆ¶
3. å¯èƒ½éœ€è¦åœ¨å‘½ä»¤è™•ç†å™¨ä¸­æ·»åŠ é¡å¤–çš„æ—¥èªŒæˆ–æ¶ˆæ¯æ¨é€

---

## ğŸ“Š æ¸¬è©¦è¦†è“‹ç‡

| åŠŸèƒ½æ¨¡çµ„ | æ¸¬è©¦ç‹€æ…‹ | è¦†è“‹ç‡ |
|---------|---------|--------|
| ç­–ç•¥è¨»å†Šç³»çµ± | âœ… PASS | 100% |
| ç­–ç•¥åˆ—è¡¨åŠŸèƒ½ | âœ… PASS | 100% |
| ç­–ç•¥è©³æƒ…æŸ¥è©¢ | âœ… PASS | 100% |
| éµå€¼è§£æ | âœ… PASS | 100% |
| å‘½ä»¤è™•ç†å™¨ | âœ… PASS | 100% |
| å›æ¸¬å¼•æ“ | â¸ï¸ å¾…æ¸¬è©¦ | N/A |

---

## ğŸ¯ å¾ŒçºŒè¡Œå‹•é …ç›®

1. **å›æ¸¬åŠŸèƒ½æ¸¬è©¦** - éœ€è¦å¯¦éš›æ•¸æ“šæ¸¬è©¦å›æ¸¬å¼•æ“
2. **TUI è¼¸å‡ºä¿®å¾©** - èª¿æŸ¥ä¸¦ä¿®å¾© Textual TUI ä¸­çš„è¼¸å‡ºé¡¯ç¤ºå•é¡Œ
3. **éŒ¯èª¤è™•ç†å¢å¼·** - æ·»åŠ æ›´è©³ç´°çš„éŒ¯èª¤æç¤ºå’Œæ—¥èªŒ
4. **ç­–ç•¥åˆ¥åæ”¯æŒ** - è€ƒæ…®æ·»åŠ æ›´å‹å¥½çš„ç­–ç•¥éµå€¼ï¼ˆå¦‚ `farmer` ä»£æ›¿ `farmerplanting`ï¼‰

---

## ğŸ“š åƒè€ƒè³‡æ–™

- [ç­–ç•¥æ¨¡çµ„ç³»çµ±å¯¦ä½œæ–‡ä»¶](file:///d:/GitHub/TW-Pulse-CLI/ç­–ç•¥æ¨¡çµ„ç³»çµ±å¯¦ä½œ.md)
- [ç­–ç•¥åŸºç¤é¡åˆ¥](file:///d:/GitHub/TW-Pulse-CLI/pulse/core/strategies/base.py)
- [ç­–ç•¥è¨»å†Šç³»çµ±](file:///d:/GitHub/TW-Pulse-CLI/pulse/core/strategies/registry.py)
- [ç­–ç•¥å‘½ä»¤è™•ç†å™¨](file:///d:/GitHub/TW-Pulse-CLI/pulse/cli/commands/strategy.py)
- [åŠŸèƒ½æ¸¬è©¦è…³æœ¬](file:///d:/GitHub/TW-Pulse-CLI/tests/test_cli/test_strategy_command.py)
- [è¨ºæ–·æ¸¬è©¦è…³æœ¬](file:///d:/GitHub/TW-Pulse-CLI/tests/test_cli/test_strategy_diagnostic.py)

---

**çµè«–**: ç­–ç•¥æ¨¡çµ„ç³»çµ±çš„æ ¸å¿ƒåŠŸèƒ½é‹ä½œæ­£å¸¸ï¼Œæ‰€æœ‰è‡ªå‹•åŒ–æ¸¬è©¦é€šéã€‚TUI é¡¯ç¤ºå•é¡Œéœ€è¦é€²ä¸€æ­¥èª¿æŸ¥æ‡‰ç”¨ç¨‹å¼å±¤çš„é…ç½®ã€‚
